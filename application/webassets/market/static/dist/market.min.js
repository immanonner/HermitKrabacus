function setCurrentPageClass(){const nav_links=document.querySelectorAll("#menu>a");Array.from(nav_links).forEach(link=>{if(link.host==window.location.host&&link.pathname==window.location.pathname||window.location.pathname=='/'&&link.pathname=="/home"||window.location.pathname=='/index'&&link.pathname=="/home"){link.classList.add("currentPage");};});};setCurrentPageClass();function fallbackCopyTextToClipboard(text){var textArea=document.createElement("textarea");textArea.value=text;textArea.style.top="0";textArea.style.left="0";textArea.style.position="fixed";document.body.appendChild(textArea);textArea.focus();textArea.select();try{var successful=document.execCommand('copy');var msg=successful?'successful':'unsuccessful';console.log('Fallback: Copying text command was '+msg);}catch(err){console.error('Fallback: Oops, unable to copy',err);}
document.body.removeChild(textArea);}
function copyTextToClipboard(text){if(!navigator.clipboard){fallbackCopyTextToClipboard(text);return;}
navigator.clipboard.writeText(text).then(function(){console.log('Async: Copying to clipboard was successful!');},function(err){console.error('Async: Could not copy text: ',err);});}
function autocompleteMatch(input){if(input==''){return[];}
var reg=new RegExp(input)
var names=ns
return names.filter(function(term){if(term.match(reg)){return term;}});}
function build_selections(terms){let selections=document.createElement("ul");for(i=0;i<terms.length;i++){let li=document.createElement("li");li.appendChild(document.createTextNode(terms[i]));li.setAttribute("onclick","update_input(`"+terms[i]+"`)");li.innertext=terms[i]
selections.appendChild(li);}
return selections}
function showResults(val){let res=document.getElementById("result");res.innerHTML='';if(ns.length<=10){res.appendChild(build_selections(ns))}else{let terms=autocompleteMatch(val)
let options=build_selections(terms)
if(terms.length==1&&val==terms[0]){res.innerHTML="";}
else{res.appendChild(options);}}}
function update_input(val){inp=document.getElementById("search");inp.value=val;showResults(val);}
if(document.getElementById("wrapper")){const grid=new gridjs.Grid({columns:[{id:'myCheckbox',name:'Select',width:'3%',plugin:{component:gridjs.plugins.selection.RowSelection,props:{id:(row)=>[row.cell(1).data,row.cell(2).data,row.cell(3).data,row.cell(4).data,row.cell(5).data,row.cell(6).data,row.cell(7).data,row.cell(8).data,row.cell(9).data,row.cell(10).data,row.cell(11).data,row.cell(12).data].join(', ')},},},{name:'typeName',width:'8%'},{name:'hub_min_price',formatter:(cell)=>`${cell.toLocaleString()}`,width:'5%'},{name:'lastPriceAvg',formatter:(cell)=>`${cell.toLocaleString()}`,width:'5%'},{name:'order_id',width:'3%'},{name:'velocity',width:'3%'},{name:'saleChance',width:'3%'},{name:'stock_remaining',formatter:(cell)=>`${cell.toLocaleString()}`,width:'3%'},{name:'dso',width:'3%'},{name:'be',formatter:(cell)=>`${cell.toLocaleString()}`,width:'5%'},{name:'ppi',formatter:(cell)=>`${cell.toLocaleString()}`,width:'5%'},{name:'rr',width:'3%'},{name:'ppd',formatter:(cell)=>`${cell.toLocaleString()}`,width:'5%'}],sort:true,pagination:{limit:20},fixedHeader:true,height:'min(fit-content)',data:mv,search:{enabled:true}}).render(document.getElementById("wrapper"));grid.on('ready',()=>{const copyBtn=document.querySelector('.js-copy-btn')
const checkboxPlugin=grid.config.plugin.get('myCheckbox');copyBtn.addEventListener('click',function(event){copyTextToClipboard(checkboxPlugin.props.store.state.rowIds.map((row)=>row.split(', ')[0]+' '+Math.round(row.split(', ')[4])).join('\r\n'));});checkboxPlugin.props.store.on('updated',()=>{let quickView=document.querySelector('#table-info>p')
let stmt='No Items Selected'
if(!checkboxPlugin.props.store.state.rowIds.length){return quickView.innerHTML=stmt}
quickView.innerHTML=''
s=checkboxPlugin.props.store.state.rowIds.map((rowId)=>parseInt(rowId.split(', ')[11])).reduce((a,b)=>a+b,0).toLocaleString();return quickView.innerHTML=`${checkboxPlugin.props.store.state.rowIds.length}\ Items Selected;\ PPD SUM:\ ${s}`});})}