function setCurrentPageClass(){const nav_links=document.querySelectorAll("#menu>a");Array.from(nav_links).forEach(link=>{if(link.host==window.location.host&&link.pathname==window.location.pathname||window.location.pathname=='/'&&link.pathname=="/home"||window.location.pathname=='/index'&&link.pathname=="/home"){link.classList.add("currentPage");};});};setCurrentPageClass();function fallbackCopyTextToClipboard(text){var textArea=document.createElement("textarea");textArea.value=text;textArea.style.top="0";textArea.style.left="0";textArea.style.position="fixed";document.body.appendChild(textArea);textArea.focus();textArea.select();try{var successful=document.execCommand('copy');var msg=successful?'successful':'unsuccessful';console.log('Fallback: Copying text command was '+msg);}catch(err){console.error('Fallback: Oops, unable to copy',err);};document.body.removeChild(textArea);};function copyTextToClipboard(text){if(!navigator.clipboard){fallbackCopyTextToClipboard(text);return;};navigator.clipboard.writeText(text).then(function(){console.log('Async: Copying to clipboard was successful!');},function(err){console.error('Async: Could not copy text: ',err);});};class Matrix_App{constructor(canvas,width,height){const current_app=this;this.maxX_pxl=canvas.width=width;this.maxY_pxl=canvas.height=height;this.ctx=canvas.getContext("2d");this.Raindrops=new Map();this.Raindrop=class Raindrop{constructor(fontFamily,fontSize){let current_drop=this;this.fontString=`bold ${fontSize}px ${fontFamily}`;this.metrics=current_app.getFontMetrics(current_drop.fontString);this.xColUbound=Math.round(current_app.maxX_pxl/current_drop.metrics.fwidth)-1;this.yColUbound=Math.round(current_app.maxY_pxl/current_drop.metrics.fheight)+1;this.xCol=current_app.randint(0,current_drop.xColUbound);this.yCol=current_app.randint(0,Math.round(current_drop.yColUbound));this.xPx=Math.round(current_drop.xCol*current_drop.metrics.fwidth);this.yPx=Math.round(current_drop.yCol*current_drop.metrics.fheight);this.textString=current_app.randStr(current_drop.yColUbound-current_drop.yCol);this.passMe=current_app.randint(0,current_drop.yColUbound);this.status=["print","pause","spin"][current_app.randint(0,2)];this.cycleCount=0;};};};randint(min,max){return Math.floor(Math.random()*(max-min+1))+min;};randStr(length){const lChars="abcdefghijklmnopqrstuvwxyz";const uChars=lChars.toUpperCase();const asciiStr=uChars;let textStr="";for(let i=0;i<length;i++){textStr+=asciiStr[this.randint(0,asciiStr.length-1)];};return textStr;};getFontMetrics(fontString){this.ctx.font=fontString;let metrics=this.ctx.measureText("M");let fontHeight=metrics.fontBoundingBoxAscent+metrics.fontBoundingBoxDescent;return{fwidth:metrics.width,fheight:fontHeight};};updateCanvasDimensions(canvas,W,H){this.maxX_pxl=canvas.width=W;this.maxY_pxl=canvas.height=H;for(let[k,drop]of this.Raindrops){drop.metrics=this.getFontMetrics(drop.fontString);drop.xColUbound=Math.round(this.maxX_pxl/drop.metrics.fwidth)-1;drop.yColUbound=Math.round(this.maxY_pxl/drop.metrics.fheight)+1;let currentPrintedString=drop.textString.substring(0,drop.cycleCount);if(drop.xCol>=drop.xColUbound||drop.yCol>=drop.yColUbound){this.Raindrops.delete(k);}else if(drop.yColUbound-currentPrintedString.length-1>0){drop.textString=currentPrintedString+this.randStr(drop.yColUbound-currentPrintedString.length-1);}else{drop.status="shrink";};};};getDrops(){while(this.Raindrops.size<Math.round(this.maxX_pxl/60)){let dewDrop=new this.Raindrop("Courier",25);while(this.Raindrops.has(dewDrop.xPx)){dewDrop=new this.Raindrop("Courier",25);};this.Raindrops.set(dewDrop.xPx,dewDrop);};};showAllRaindrops(){this.ctx.fillStyle="green";for(let drop of this.Raindrops.values()){this.ctx.font=drop.fontString;let count=0;for(let letter in drop.textString){this.ctx.fillText(drop.textString[letter],drop.xPx,drop.yPx+count*drop.metrics.fheight);count+=1;};};};makeItRainText(){for(let[k,drop]of this.Raindrops){this.ctx.font=drop.fontString;this.ctx.fillStyle="green";let currCycle=0;switch(drop.status){case"pause":if(drop.passMe!=0){drop.passMe-=1;}else{drop.status="print";};break;case"print":while(currCycle<drop.cycleCount+1){this.ctx.fillText(drop.textString[currCycle],drop.xPx,drop.yPx+currCycle*drop.metrics.fheight);currCycle+=1;};if(drop.cycleCount<drop.textString.length-1){drop.cycleCount+=1;drop.status="spin";drop.passMe=this.randint(5,15);}else{drop.status="shrink";};break;case"spin":while(currCycle<drop.cycleCount+1){this.ctx.fillText(drop.textString[currCycle],drop.xPx,drop.yPx+currCycle*drop.metrics.fheight);currCycle+=1;};if(drop.passMe>0){this.ctx.fillStyle="rgb(204, 255,204)";this.ctx.fillText(this.randStr(1),drop.xPx,drop.yPx+currCycle*drop.metrics.fheight);drop.passMe-=1;}else if(drop.cycleCount<drop.textString.length-1){this.ctx.fillText(drop.textString[currCycle],drop.xPx,drop.yPx+currCycle*drop.metrics.fheight);drop.status="print";}else{drop.status="shrink";};break;case"shrink":while(currCycle<drop.textString.length){this.ctx.fillText(drop.textString[currCycle],drop.xPx,drop.yPx+currCycle*drop.metrics.fheight);currCycle+=1;};if(drop.textString.length<2){drop.status="delete";};drop.textString=drop.textString.substring(1);drop.yPx+=drop.metrics.fheight;break;case"delete":this.Raindrops.delete(k);this.getDrops();break;default:break;};};};kill(frameid){this.Raindrops.clear();this.ctx.fillStyle='#232323';this.ctx.fillRect(0,0,this.maxX_pxl,this.maxY_pxl);cancelAnimationFrame(frameid);};};const matrix_canvas=document.getElementById('mtx');const app=new Matrix_App(matrix_canvas,window.innerWidth,window.innerHeight);function run(){app.getDrops();app.ctx.fillStyle='#232323';app.ctx.fillRect(0,0,app.maxX_pxl,app.maxY_pxl);app.makeItRainText();frameid=requestAnimationFrame(run);};run();window.onresize=function(){app.updateCanvasDimensions(matrix_canvas,window.innerWidth,window.innerHeight);};